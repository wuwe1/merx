---
allowed-tools: Bash, Read, Write, LS
---

# Update Context

æ­¤å‘½ä»¤æ›´æ–° `.claude/context/` ä¸­çš„é¡¹ç›®ä¸Šä¸‹æ–‡æ–‡æ¡£ä»¥åæ˜ é¡¹ç›®çš„å½“å‰çŠ¶æ€ã€‚åœ¨æ¯ä¸ªå¼€å‘ä¼šè¯ç»“æŸæ—¶è¿è¡Œæ­¤å‘½ä»¤ä»¥ä¿æŒä¸Šä¸‹æ–‡å‡†ç¡®ã€‚

## å¿…éœ€è§„åˆ™

**é‡è¦ï¼š** åœ¨æ‰§è¡Œæ­¤å‘½ä»¤ä¹‹å‰ï¼Œè¯·é˜…è¯»å¹¶éµå¾ªï¼š
- `.claude/rules/datetime.md` - ç”¨äºè·å–çœŸå®çš„å½“å‰æ—¥æœŸ/æ—¶é—´

## é¢„æ£€æ¸…å•

åœ¨ç»§ç»­ä¹‹å‰ï¼Œå®Œæˆè¿™äº›éªŒè¯æ­¥éª¤ã€‚
ä¸è¦ç”¨é¢„æ£€è¿›åº¦æ‰“æ‰°ç”¨æˆ·ï¼ˆ"æˆ‘ä¸ä¼š..."ï¼‰ã€‚åªéœ€æ‰§è¡Œå®ƒä»¬ç„¶åç»§ç»­ã€‚

### 1. ä¸Šä¸‹æ–‡éªŒè¯
- è¿è¡Œï¼š`ls -la .claude/context/ 2>/dev/null`
- å¦‚æœç›®å½•ä¸å­˜åœ¨æˆ–ä¸ºç©ºï¼š
  - å‘Šè¯‰ç”¨æˆ·ï¼š"âŒ æ²¡æœ‰ä¸Šä¸‹æ–‡å¯æ›´æ–°ã€‚è¯·å…ˆè¿è¡Œ /context:createã€‚"
  - ä¼˜é›…é€€å‡º
- è®¡ç®—ç°æœ‰æ–‡ä»¶æ•°ï¼š`ls -1 .claude/context/*.md 2>/dev/null | wc -l`
- æŠ¥å‘Šï¼š"ğŸ“ å‘ç° {count} ä¸ªä¸Šä¸‹æ–‡æ–‡ä»¶å¾…æ£€æŸ¥æ›´æ–°"

### 2. å˜æ›´æ£€æµ‹

æ”¶é›†å…³äºä»€ä¹ˆå·²æ›´æ”¹çš„ä¿¡æ¯ï¼š

**Git å˜æ›´ï¼š**
- è¿è¡Œï¼š`git status --short` æŸ¥çœ‹æœªæäº¤çš„æ›´æ”¹
- è¿è¡Œï¼š`git log --oneline -10` æŸ¥çœ‹æœ€è¿‘çš„æäº¤
- è¿è¡Œï¼š`git diff --stat HEAD~5..HEAD 2>/dev/null` æŸ¥çœ‹æœ€è¿‘æ›´æ”¹çš„æ–‡ä»¶

**æ–‡ä»¶ä¿®æ”¹ï¼š**
- æ£€æŸ¥ä¸Šä¸‹æ–‡æ–‡ä»¶å¹´é¾„ï¼š`find .claude/context -name "*.md" -type f -exec ls -lt {} + | head -5`
- æ³¨æ„å“ªäº›ä¸Šä¸‹æ–‡æ–‡ä»¶æœ€æ—§ï¼Œå¯èƒ½éœ€è¦æ›´æ–°

**ä¾èµ–é¡¹å˜æ›´ï¼š**
- Node.jsï¼š`git diff HEAD~5..HEAD package.json 2>/dev/null`
- Pythonï¼š`git diff HEAD~5..HEAD requirements.txt pyproject.toml 2>/dev/null`
- Javaï¼š`git diff HEAD~5..HEAD pom.xml build.gradle build.gradle.kts 2>/dev/null`
- C#/.NETï¼š`git diff HEAD~5..HEAD *.sln *.csproj 2>/dev/null`
- Rubyï¼š`git diff HEAD~5..HEAD Gemfile Gemfile.lock 2>/dev/null`
- Rustï¼š`git diff HEAD~5..HEAD Cargo.toml Cargo.lock 2>/dev/null`
- Goï¼š`git diff HEAD~5..HEAD go.mod go.sum 2>/dev/null`
- PHPï¼š`git diff HEAD~5..HEAD composer.json composer.lock 2>/dev/null`
- Dart/Flutterï¼š`git diff HEAD~5..HEAD pubspec.yaml pubspec.lock 2>/dev/null`
- Swiftï¼š`git diff HEAD~5..HEAD Package.swift Package.resolved 2>/dev/null`
- C/C++ï¼š`git diff HEAD~5..HEAD CMakeLists.txt 2>/dev/null`
- æ£€æŸ¥æ˜¯å¦æœ‰æ–°çš„ä¾èµ–é¡¹æ·»åŠ æˆ–ç‰ˆæœ¬åœ¨ä»»ä½•æ„å»ºç³»ç»Ÿä¸­æ›´æ”¹

### 3. è·å–å½“å‰æ—¥æœŸæ—¶é—´
- è¿è¡Œï¼š`date -u +"%Y-%m-%dT%H:%M:%SZ"`
- å­˜å‚¨ä»¥æ›´æ–°ä¿®æ”¹æ–‡ä»¶ä¸­çš„ `last_updated` å­—æ®µ

## è¯´æ˜

### 1. ç³»ç»Ÿæ€§å˜æ›´åˆ†æ

å¯¹äºæ¯ä¸ªä¸Šä¸‹æ–‡æ–‡ä»¶ï¼Œç¡®å®šæ˜¯å¦éœ€è¦æ›´æ–°ï¼š

**ç³»ç»Ÿåœ°æ£€æŸ¥æ¯ä¸ªæ–‡ä»¶ï¼š**
#### `progress.md` - **å§‹ç»ˆæ›´æ–°**
  - æ£€æŸ¥ï¼šæœ€è¿‘çš„æäº¤ã€å½“å‰åˆ†æ”¯ã€æœªæäº¤çš„æ›´æ”¹
  - æ›´æ–°ï¼šæœ€æ–°å®Œæˆçš„å·¥ä½œã€å½“å‰é˜»å¡é¡¹ã€ä¸‹ä¸€æ­¥
  - è¿è¡Œï¼š`git log --oneline -5` è·å–æœ€è¿‘çš„æäº¤æ¶ˆæ¯
  - å¦‚æœé€‚ç”¨ï¼ŒåŒ…æ‹¬å®Œæˆç™¾åˆ†æ¯”

#### `project-structure.md` - **å¦‚æœ‰æ›´æ”¹åˆ™æ›´æ–°**
  - æ£€æŸ¥ï¼š`git diff --name-status HEAD~10..HEAD | grep -E '^A'` æŸ¥æ‰¾æ–°æ–‡ä»¶
  - æ›´æ–°ï¼šæ–°ç›®å½•ã€ç§»åŠ¨çš„æ–‡ä»¶ã€ç»“æ„é‡ç»„
  - ä»…åœ¨å‘ç”Ÿé‡å¤§ç»“æ„å˜åŒ–æ—¶æ›´æ–°

#### `tech-context.md` - **å¦‚æœä¾èµ–é¡¹æ›´æ”¹åˆ™æ›´æ–°**
  - æ£€æŸ¥ï¼šåŒ…æ–‡ä»¶ä¸­çš„æ–°ä¾èµ–é¡¹æˆ–ç‰ˆæœ¬å˜æ›´
  - æ›´æ–°ï¼šæ–°åº“ã€å‡çº§çš„ç‰ˆæœ¬ã€æ–°çš„å¼€å‘å·¥å…·
  - åŒ…æ‹¬å®‰å…¨æ›´æ–°æˆ–ç ´åæ€§å˜æ›´

#### `system-patterns.md` - **å¦‚æœæ¶æ„æ›´æ”¹åˆ™æ›´æ–°**
  - æ£€æŸ¥ï¼šæ–°çš„è®¾è®¡æ¨¡å¼ã€æ¶æ„å†³ç­–
  - æ›´æ–°ï¼šé‡‡ç”¨çš„æ–°æ¨¡å¼ã€å®Œæˆçš„é‡æ„
  - ä»…é’ˆå¯¹é‡å¤§æ¶æ„å˜åŒ–è¿›è¡Œæ›´æ–°

#### `product-context.md` - **å¦‚æœéœ€æ±‚æ›´æ”¹åˆ™æ›´æ–°**
  - æ£€æŸ¥ï¼šå®ç°çš„æ–°åŠŸèƒ½ã€çº³å…¥çš„ç”¨æˆ·åé¦ˆ
  - æ›´æ–°ï¼šæ–°çš„ç”¨æˆ·æ•…äº‹ã€æ›´æ”¹çš„éœ€æ±‚
  - åŒ…æ‹¬äº§å“æ–¹å‘çš„ä»»ä½•è½¬å˜

#### `project-brief.md` - **å¾ˆå°‘æ›´æ–°**
  - æ£€æŸ¥ï¼šä»…å½“åŸºæœ¬é¡¹ç›®ç›®æ ‡å‘ç”Ÿå˜åŒ–æ—¶
  - æ›´æ–°ï¼šé‡å¤§èŒƒå›´å˜æ›´ã€æ–°ç›®æ ‡
  - é€šå¸¸ä¿æŒç¨³å®š

#### `project-overview.md` - **è¾¾åˆ°é‡è¦é‡Œç¨‹ç¢‘æ—¶æ›´æ–°**
  - æ£€æŸ¥ï¼šå®Œæˆçš„é‡å¤§åŠŸèƒ½ã€æ˜¾è‘—è¿›å±•
  - æ›´æ–°ï¼šåŠŸèƒ½çŠ¶æ€ã€èƒ½åŠ›å˜åŒ–
  - è¾¾åˆ°é¡¹ç›®é‡Œç¨‹ç¢‘æ—¶æ›´æ–°

#### `project-vision.md` - **å¾ˆå°‘æ›´æ–°**
  - æ£€æŸ¥ï¼šæˆ˜ç•¥æ–¹å‘å˜åŒ–
  - æ›´æ–°ï¼šä»…é’ˆå¯¹é‡å¤§æ„¿æ™¯è½¬å˜
  - é€šå¸¸ä¿æŒç¨³å®š

#### `project-style-guide.md` - **å¦‚æœçº¦å®šæ›´æ”¹åˆ™æ›´æ–°**
  - æ£€æŸ¥ï¼šæ–°çš„ linting è§„åˆ™ã€é£æ ¼å†³ç­–
  - æ›´æ–°ï¼šçº¦å®šå˜æ›´ã€é‡‡ç”¨çš„æ–°æ¨¡å¼
  - åŒ…æ‹¬æ–°æ¨¡å¼çš„ç¤ºä¾‹
### 2. æ™ºèƒ½æ›´æ–°ç­–ç•¥

**å¯¹äºéœ€è¦æ›´æ–°çš„æ¯ä¸ªæ–‡ä»¶ï¼š**

1. **è¯»å–ç°æœ‰æ–‡ä»¶**ä»¥ç†è§£å½“å‰å†…å®¹
2. **è¯†åˆ«éœ€è¦æ›´æ–°çš„å…·ä½“éƒ¨åˆ†**
3. **ä¿ç•™ frontmatter** ä½†æ›´æ–° `last_updated` å­—æ®µï¼š
   ```yaml
   ---
   created: [ä¿ç•™åŸå§‹å€¼]
   last_updated: [ä½¿ç”¨ date å‘½ä»¤çš„çœŸå®æ—¥æœŸæ—¶é—´]
   version: [å¦‚æœæ˜¯é‡å¤§æ›´æ–°åˆ™é€’å¢ï¼Œä¾‹å¦‚ 1.0 â†’ 1.1]
   author: Claude Code PM System
   ---
   ```
4. **è¿›è¡Œé’ˆå¯¹æ€§æ›´æ–°** - ä¸è¦é‡å†™æ•´ä¸ªæ–‡ä»¶
5. å¦‚æœæœ‰é‡å¤§æ›´æ–°ï¼Œ**åœ¨åº•éƒ¨æ·»åŠ æ›´æ–°è¯´æ˜**ï¼š
   ```markdown
   ## æ›´æ–°å†å²
   - {date}: {æ›´æ”¹å†…å®¹æ‘˜è¦}
   ```

### 3. æ›´æ–°éªŒè¯

æ›´æ–°æ¯ä¸ªæ–‡ä»¶åï¼š
- éªŒè¯æ–‡ä»¶ä»æœ‰æœ‰æ•ˆçš„ frontmatter
- æ£€æŸ¥æ–‡ä»¶å¤§å°æ˜¯å¦åˆç†ï¼ˆæœªæŸåï¼‰
- ç¡®ä¿ markdown æ ¼å¼ä¿æŒä¸å˜
- ç¡®è®¤æ›´æ–°å‡†ç¡®åæ˜ äº†å˜æ›´

### 4. è·³è¿‡ä¼˜åŒ–

**è·³è¿‡ä¸éœ€è¦æ›´æ–°çš„æ–‡ä»¶ï¼š**
- å¦‚æœæœªæ£€æµ‹åˆ°ç›¸å…³å˜æ›´ï¼Œè·³è¿‡è¯¥æ–‡ä»¶
- åœ¨æ‘˜è¦ä¸­æŠ¥å‘Šè·³è¿‡çš„æ–‡ä»¶
- å¦‚æœå†…å®¹æœªæ›´æ”¹ï¼Œä¸è¦æ›´æ–°æ—¶é—´æˆ³
- è¿™æ ·å¯ä»¥ä¿ç•™å‡†ç¡®çš„"æœ€åä¿®æ”¹"ä¿¡æ¯

### 5. é”™è¯¯å¤„ç†

**å¸¸è§é—®é¢˜ï¼š**
- **æ–‡ä»¶é”å®šï¼š** "âŒ æ— æ³•æ›´æ–° {file} - å¯èƒ½åœ¨ç¼–è¾‘å™¨ä¸­æ‰“å¼€"
- **æƒé™è¢«æ‹’ç»ï¼š** "âŒ æ— æ³•å†™å…¥ {file} - è¯·æ£€æŸ¥æƒé™"
- **æ–‡ä»¶æŸåï¼š** "âš ï¸ {file} ä¼¼ä¹å·²æŸå - è·³è¿‡æ›´æ–°"
- **ç£ç›˜ç©ºé—´ï¼š** "âŒ ç£ç›˜ç©ºé—´ä¸è¶³ï¼Œæ— æ³•æ›´æ–°"

å¦‚æœæ›´æ–°å¤±è´¥ï¼š
- æŠ¥å‘Šå“ªäº›æ–‡ä»¶æˆåŠŸæ›´æ–°
- æ³¨æ˜å“ªäº›æ–‡ä»¶å¤±è´¥åŠåŸå› 
- ä¿ç•™åŸå§‹æ–‡ä»¶ï¼ˆä¸è¦ç•™ä¸‹æŸåçŠ¶æ€ï¼‰

### 6. æ›´æ–°æ‘˜è¦

æä¾›è¯¦ç»†çš„æ›´æ–°æ‘˜è¦ï¼š

```
ğŸ”„ ä¸Šä¸‹æ–‡æ›´æ–°å®Œæˆ

ğŸ“Š æ›´æ–°ç»Ÿè®¡ï¼š
  - æ‰«æçš„æ–‡ä»¶ï¼š{total_count}
  - æ›´æ–°çš„æ–‡ä»¶ï¼š{updated_count}
  - è·³è¿‡çš„æ–‡ä»¶ï¼š{skipped_count}ï¼ˆæ— éœ€æ›´æ”¹ï¼‰
  - é”™è¯¯ï¼š{error_count}

ğŸ“ å·²æ›´æ–°çš„æ–‡ä»¶ï¼š
  âœ… progress.md - æ›´æ–°äº†æœ€è¿‘æäº¤ã€å½“å‰çŠ¶æ€
  âœ… tech-context.md - æ·»åŠ äº† 3 ä¸ªæ–°ä¾èµ–é¡¹
  âœ… project-structure.md - æ³¨æ˜äº†æ–°çš„ /utils ç›®å½•

â­ï¸ è·³è¿‡çš„æ–‡ä»¶ï¼ˆæ— æ›´æ”¹ï¼‰ï¼š
  - project-brief.mdï¼ˆæœ€åæ›´æ–°ï¼š5 å¤©å‰ï¼‰
  - project-vision.mdï¼ˆæœ€åæ›´æ–°ï¼š2 å‘¨å‰ï¼‰
  - system-patterns.mdï¼ˆæœ€åæ›´æ–°ï¼š3 å¤©å‰ï¼‰

âš ï¸ é—®é¢˜ï¼š
  {ä»»ä½•è­¦å‘Šæˆ–é”™è¯¯}

â° æœ€åæ›´æ–°ï¼š{timestamp}
ğŸ”„ ä¸‹ä¸€æ­¥ï¼šå®šæœŸè¿è¡Œæ­¤å‘½ä»¤ä»¥ä¿æŒä¸Šä¸‹æ–‡æœ€æ–°
ğŸ’¡ æç¤ºï¼šé‡å¤§å˜æ›´ï¼Ÿè€ƒè™‘è¿è¡Œ /context:create è¿›è¡Œå®Œå…¨åˆ·æ–°
```

### 7. å¢é‡æ›´æ–°è·Ÿè¸ª

**è·Ÿè¸ªæ›´æ–°äº†ä»€ä¹ˆï¼š**
- æ³¨æ˜æ¯ä¸ªæ–‡ä»¶ä¸­ä¿®æ”¹äº†å“ªäº›éƒ¨åˆ†
- ä¿æŒæ›´æ”¹é›†ä¸­å’Œç²¾ç¡®
- ä¸è¦é‡æ–°ç”Ÿæˆæœªæ›´æ”¹çš„å†…å®¹
- ä¿ç•™æ ¼å¼å’Œç»“æ„

### 8. æ€§èƒ½ä¼˜åŒ–

å¯¹äºå¤§å‹é¡¹ç›®ï¼š
- å°½å¯èƒ½å¹¶è¡Œå¤„ç†æ–‡ä»¶
- æ˜¾ç¤ºè¿›åº¦ï¼š"æ­£åœ¨æ›´æ–°ä¸Šä¸‹æ–‡æ–‡ä»¶... {current}/{total}"
- è·³è¿‡éå¸¸å¤§çš„æ–‡ä»¶å¹¶å‘å‡ºè­¦å‘Š
- ä½¿ç”¨ git diff å¿«é€Ÿè¯†åˆ«æ›´æ”¹çš„åŒºåŸŸ

## ä¸Šä¸‹æ–‡æ”¶é›†å‘½ä»¤

ä½¿ç”¨è¿™äº›å‘½ä»¤æ£€æµ‹å˜æ›´ï¼š
- ä¸Šä¸‹æ–‡ç›®å½•ï¼š`.claude/context/`
- å½“å‰ git çŠ¶æ€ï¼š`git status --short`
- æœ€è¿‘æäº¤ï¼š`git log --oneline -10`
- æ›´æ”¹çš„æ–‡ä»¶ï¼š`git diff --name-only HEAD~5..HEAD 2>/dev/null`
- åˆ†æ”¯ä¿¡æ¯ï¼š`git branch --show-current`
- æœªæäº¤çš„æ›´æ”¹ï¼š`git diff --stat`
- æ–°çš„æœªè·Ÿè¸ªæ–‡ä»¶ï¼š`git ls-files --others --exclude-standard | head -10`
- ä¾èµ–é¡¹æ›´æ”¹ï¼šæ£€æŸ¥ package.jsonã€requirements.txtã€pyproject.tomlã€composer.jsonã€Gemfileã€Cargo.tomlã€go.modã€pom.xmlã€build.gradleã€build.gradle.ktsã€*.slnã€*.csprojã€Package.swiftã€pubspec.yamlã€CMakeLists.txt ç­‰

## é‡è¦è¯´æ˜

- **ä»…æ›´æ–°æœ‰å®é™…æ›´æ”¹çš„æ–‡ä»¶** - ä¿ç•™å‡†ç¡®çš„æ—¶é—´æˆ³
- **å§‹ç»ˆä½¿ç”¨çœŸå®æ—¥æœŸæ—¶é—´**ï¼Œæ¥è‡ªç³»ç»Ÿæ—¶é’Ÿç”¨äº `last_updated`
- **è¿›è¡Œç²¾ç¡®æ›´æ–°** - ä¸è¦é‡æ–°ç”Ÿæˆæ•´ä¸ªæ–‡ä»¶
- **éªŒè¯æ¯æ¬¡æ›´æ–°** - ç¡®ä¿æ–‡ä»¶ä¿æŒæœ‰æ•ˆ
- **æä¾›è¯¦ç»†æ‘˜è¦** - æ˜¾ç¤ºæ›´æ”¹äº†ä»€ä¹ˆå’Œæ²¡æœ‰æ›´æ”¹ä»€ä¹ˆ
- **ä¼˜é›…å¤„ç†é”™è¯¯** - ä¸è¦æŸåç°æœ‰ä¸Šä¸‹æ–‡

$ARGUMENTS
