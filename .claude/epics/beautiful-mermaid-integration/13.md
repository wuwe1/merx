---
name: API 调研和验证
status: done
created: 2026-02-04T08:11:54Z
updated: 2026-02-09T05:15:15Z
github: https://github.com/wuwe1/merx/issues/13
depends_on: []
parallel: false
conflicts_with: []
---

# Task: API 调研和验证

## 描述

在修改代码前，先确认 beautiful-mermaid 的 API 用法，创建独立的测试脚本验证 API 行为。

## 验收标准

- [ ] 阅读 `node_modules/beautiful-mermaid/dist/index.d.ts` 确认 API
- [ ] 创建 `scripts/test-api.ts` 测试脚本
- [ ] 运行测试脚本验证 `renderMermaid()` 返回有效 SVG
- [ ] 运行测试脚本验证 `renderMermaidAscii()` 返回 ASCII 图表
- [ ] 记录 API 用法示例到注释中

## 技术细节

### 测试脚本内容
```typescript
// scripts/test-api.ts
import { renderMermaid, renderMermaidAscii } from 'beautiful-mermaid'

async function main() {
  const diagram = 'graph LR; A-->B-->C'

  // 测试 SVG 渲染
  console.log('=== SVG 渲染 ===')
  const svg = await renderMermaid(diagram, { bg: '#1a1b26', fg: '#a9b1d6' })
  console.log('SVG 开头:', svg.substring(0, 100))
  console.log('是否包含 <svg:', svg.includes('<svg'))

  // 测试 ASCII 渲染
  console.log('\n=== ASCII 渲染 ===')
  const ascii = renderMermaidAscii(diagram)
  console.log(ascii)
}

main().catch(console.error)
```

### 运行方式
```bash
npx tsx scripts/test-api.ts
```

## 工作量估算

- 规模：XS
- 小时数：0.5
- 并行：false（其他任务依赖此任务的结果）

## 完成定义

- [ ] 测试脚本创建并运行成功
- [ ] API 用法已确认并记录
- [ ] 知道 RenderOptions 的正确字段名
