---
name: 构建和发布
status: open
created: 2026-02-04T02:46:28Z
updated: 2026-02-04T02:51:33Z
github: https://github.com/wuwe1/merx/issues/11
depends_on: [2, 3, 4, 5, 6, 7, 8, 9, 10]
parallel: false
conflicts_with: []
---

# Task: 构建和发布

## 验收标准

- [ ] `npm run build` 生成可用的 dist/
- [ ] `npm pack` 生成正确的 tarball
- [ ] `npx merx` 本地测试成功
- [ ] package.json 包含完整的 npm 发布元数据
- [ ] README.md 包含安装和使用说明
- [ ] 性能测试：简单图表 < 200ms

## 技术细节

### unbuild 配置
```typescript
// build.config.ts
import { defineBuildConfig } from 'unbuild'

export default defineBuildConfig({
  entries: ['src/cli'],
  outDir: 'dist',
  clean: true,
  declaration: true,
  rollup: {
    emitCJS: false,
    inlineDependencies: true
  }
})
```

### package.json 发布配置
```json
{
  "name": "merx",
  "version": "0.1.0",
  "description": "Beautiful Mermaid diagrams from the terminal",
  "keywords": ["mermaid", "diagram", "svg", "ascii", "cli"],
  "author": "Craft (lukilabs)",
  "license": "MIT",
  "repository": {
    "type": "git",
    "url": "https://github.com/lukilabs/merx"
  },
  "bin": {
    "merx": "./dist/cli.mjs"
  },
  "files": [
    "dist"
  ],
  "engines": {
    "node": ">=18"
  }
}
```

### 性能测试脚本
```bash
#!/bin/bash
# scripts/benchmark.sh

echo "Benchmarking simple diagram..."
time echo "graph LR; A-->B" | node dist/cli.mjs render

echo "
Benchmarking with theme..."
time echo "graph LR; A-->B" | node dist/cli.mjs render --theme github-dark

echo "
Target: < 200ms"
```

### README 结构
```markdown
# Merx

Beautiful Mermaid diagrams from the terminal.

## Installation
## Quick Start
## Commands
## Configuration
## Themes
## License
```

## 依赖

- [ ] 所有功能任务完成（001-009）

## 工作量估算

- 规模：M
- 小时数：3-4
- 并行：false（需要所有功能完成）

## 完成定义

- [ ] 构建成功
- [ ] 本地 npx 测试通过
- [ ] 性能达标
- [ ] README 完整
- [ ] 可发布到 npm
