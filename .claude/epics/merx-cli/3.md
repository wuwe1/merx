---
name: CLI 入口和 render 命令
status: open
created: 2026-02-04T02:46:28Z
updated: 2026-02-04T02:51:33Z
github: https://github.com/wuwe1/merx/issues/3
depends_on: [2]
parallel: false
conflicts_with: []
---

# Task: CLI 入口和 render 命令

## 描述

实现 CLI 入口点和核心 `render` 命令，支持基本的文件渲染功能。用户可以通过 `merx render diagram.mmd` 将 Mermaid 文件渲染为 SVG。

## 验收标准

- [ ] `merx` 命令（无参数）显示帮助信息
- [ ] `merx --help` 和 `merx -h` 显示完整帮助
- [ ] `merx --version` 和 `merx -v` 显示版本号
- [ ] `merx render diagram.mmd` 渲染文件为 SVG
- [ ] `merx render diagram.mmd -o output.svg` 输出到指定文件
- [ ] 文件不存在时显示友好错误

## 技术细节

### citty 命令结构
```typescript
// src/cli.ts
import { defineCommand, runMain } from 'citty'
import render from './commands/render'

const main = defineCommand({
  meta: { name: 'merx', version: '0.1.0', description: '...' },
  subCommands: { render }
})

runMain(main)
```

### render 命令实现
```typescript
// src/commands/render.ts
import { defineCommand } from 'citty'
import { renderMermaid } from 'beautiful-mermaid'

export default defineCommand({
  meta: { name: 'render', description: '渲染 Mermaid 图表' },
  args: {
    file: { type: 'positional', description: '输入文件' },
    output: { type: 'string', alias: 'o', description: '输出文件' },
    ascii: { type: 'boolean', description: 'ASCII 输出' }
  },
  async run({ args }) {
    // 实现渲染逻辑
  }
})
```

## 依赖

- [ ] 任务 001 完成（项目初始化）
- [ ] beautiful-mermaid API 可用

## 工作量估算

- 规模：M
- 小时数：4-6
- 并行：false（后续任务依赖此任务）

## 完成定义

- [ ] 代码已实现
- [ ] `merx render test.mmd` 成功渲染
- [ ] 帮助信息清晰完整
- [ ] 基本错误处理工作
