---
name: è¾…åŠ©å‘½ä»¤ (themes, init)
status: open
created: 2026-02-04T02:46:28Z
updated: 2026-02-04T02:51:33Z
github: https://github.com/wuwe1/merx/issues/8
depends_on: [2, 5]
parallel: true
conflicts_with: []
---

# Task: è¾…åŠ©å‘½ä»¤ (themes, init)

## æè¿°

å®ç° `merx themes` å’Œ `merx init` è¾…åŠ©å‘½ä»¤ï¼Œæå‡å¼€å‘è€…ä½“éªŒã€‚

## éªŒæ”¶æ ‡å‡†

### themes å‘½ä»¤
- [ ] `merx themes` åˆ—å‡ºæ‰€æœ‰ 15 ä¸ªå†…ç½®ä¸»é¢˜
- [ ] æ˜¾ç¤ºæ¯ä¸ªä¸»é¢˜çš„é¢œè‰²é¢„è§ˆï¼ˆç»ˆç«¯å½©è‰²æ–¹å—ï¼‰
- [ ] æ”¯æŒ --json è¾“å‡ºæœºå™¨å¯è¯»æ ¼å¼

### init å‘½ä»¤
- [ ] `merx init` åœ¨å½“å‰ç›®å½•åˆ›å»º .merxrc
- [ ] ç”Ÿæˆçš„é…ç½®åŒ…å«æ³¨é‡Šè¯´æ˜
- [ ] å·²å­˜åœ¨ .merxrc æ—¶è¯¢é—®æ˜¯å¦è¦†ç›–
- [ ] æ”¯æŒ --force å¼ºåˆ¶è¦†ç›–

## æŠ€æœ¯ç»†èŠ‚

### themes å‘½ä»¤
```typescript
// src/commands/themes.ts
import { defineCommand } from 'citty'
import { getBuiltinThemes } from 'beautiful-mermaid'

export default defineCommand({
  meta: { name: 'themes', description: 'åˆ—å‡ºå¯ç”¨ä¸»é¢˜' },
  args: {
    json: { type: 'boolean', description: 'JSON æ ¼å¼è¾“å‡º' }
  },
  run({ args }) {
    const themes = getBuiltinThemes()

    if (args.json) {
      console.log(JSON.stringify(themes, null, 2))
      return
    }

    console.log('Available themes:
')
    for (const [name, colors] of Object.entries(themes)) {
      const preview = colorBlock(colors.bg) + colorBlock(colors.fg)
      console.log(`  ${preview} ${name}`)
    }
  }
})

function colorBlock(hex: string): string {
  // ä½¿ç”¨ ANSI è½¬ä¹‰ç æ˜¾ç¤ºé¢œè‰²æ–¹å—
  return `[48;2;${hexToRgb(hex)}m  [0m`
}
```

### init å‘½ä»¤
```typescript
// src/commands/init.ts
const defaultRc = `{
  // é»˜è®¤ä¸»é¢˜
  "theme": "tokyo-night",

  // è¾“å‡ºæ ¼å¼: svg | ascii | png
  "format": "svg",

  // ASCII è¾“å‡ºè®¾ç½®
  "ascii": {
    "width": 80
  },

  // è‡ªå®šä¹‰ä¸»é¢˜
  "themes": {
    // "my-theme": { "bg": "#fff", "fg": "#000" }
  }
}
`

export default defineCommand({
  meta: { name: 'init', description: 'åˆ›å»ºé…ç½®æ–‡ä»¶' },
  args: {
    force: { type: 'boolean', alias: 'f', description: 'å¼ºåˆ¶è¦†ç›–' }
  },
  async run({ args }) {
    const rcPath = path.join(process.cwd(), '.merxrc')

    if (await exists(rcPath) && !args.force) {
      console.error('.merxrc already exists. Use --force to overwrite.')
      process.exit(1)
    }

    await fs.writeFile(rcPath, defaultRc)
    console.log('âœ… Created .merxrc')
  }
})
```

## ä¾èµ–

- [ ] ä»»åŠ¡ 001 å®Œæˆï¼ˆé¡¹ç›®åˆå§‹åŒ–ï¼‰
- [ ] ä»»åŠ¡ 004 å®Œæˆï¼ˆé…ç½®ç³»ç»Ÿï¼‰
- [ ] beautiful-mermaid ä¸»é¢˜åˆ—è¡¨ API

## å·¥ä½œé‡ä¼°ç®—

- è§„æ¨¡ï¼šS
- å°æ—¶æ•°ï¼š2-3
- å¹¶è¡Œï¼štrue

## å®Œæˆå®šä¹‰

- [ ] themes å‘½ä»¤æ˜¾ç¤ºæ‰€æœ‰ä¸»é¢˜
- [ ] é¢œè‰²é¢„è§ˆåœ¨æ”¯æŒçš„ç»ˆç«¯å·¥ä½œ
- [ ] init å‘½ä»¤åˆ›å»ºæœ‰æ•ˆé…ç½®
- [ ] è¦†ç›–ä¿æŠ¤å·¥ä½œ
